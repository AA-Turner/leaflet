//let postcodeGeoJSON;
const postcodeArray = [{"postcode": "BD11 1LJ"},{"postcode": "LS1 3EX"},{"postcode": "LS10 3LG"},{"postcode": "LS11 8AG"},{"postcode": "LS11 8PH"},{"postcode": "LS12 1SR"},{"postcode": "LS12 5BN"},{"postcode": "LS12 5DU"},{"postcode": "LS12 5EA"},{"postcode": "LS13 2AJ"},{"postcode": "LS13 2BW"},{"postcode": "LS13 2JA"},{"postcode": "LS13 3NF"},{"postcode": "LS14 1EG"},{"postcode": "LS14 3ED"},{"postcode": "LS14 3JD"},{"postcode": "LS14 6JS"},{"postcode": "LS15 4AJ"},{"postcode": "LS15 4EL"},{"postcode": "LS15 7JY"},{"postcode": "LS15 7RJ"},{"postcode": "LS15 8AB"},{"postcode": "LS15 8JH"},{"postcode": "LS15 9AH"},{"postcode": "LS16 5HB"},{"postcode": "LS16 5JT"},{"postcode": "LS16 6BS"},{"postcode": "LS16 6HW"},{"postcode": "LS16 7DF"},{"postcode": "LS16 7JX"},{"postcode": "LS16 7SY"},{"postcode": "LS16 9BW"},{"postcode": "LS17 6LE"},{"postcode": "LS17 7BZ"},{"postcode": "LS17 7NZ"},{"postcode": "LS17 7PB"},{"postcode": "LS17 7TN"},{"postcode": "LS17 8GS"},{"postcode": "LS17 8HH"},{"postcode": "LS17 9AR"},{"postcode": "LS18 4BH"},{"postcode": "LS18 4DU"},{"postcode": "LS18 4RJ"},{"postcode": "LS19 6AS"},{"postcode": "LS19 6QQ"},{"postcode": "LS19 7HW"},{"postcode": "LS19 7RG"},{"postcode": "LS20 9BB"},{"postcode": "LS20 9BT"},{"postcode": "LS20 9EP"},{"postcode": "LS22 5BL"},{"postcode": "LS22 6LP"},{"postcode": "LS22 6PN"},{"postcode": "LS23  6JQ"},{"postcode": "LS23 6DN"},{"postcode": "LS23 6DR"},{"postcode": "LS23 6SJ"},{"postcode": "LS24 9HY"},{"postcode": "LS24 9RF"},{"postcode": "LS25 1DT"},{"postcode": "LS25 3DA"},{"postcode": "LS25 4AF"},{"postcode": "LS25 5AU"},{"postcode": "LS25 6AX"},{"postcode": "LS25 6BH"},{"postcode": "LS25 7HF"},{"postcode": "LS26 0LW"},{"postcode": "LS26 8DX"},{"postcode": "LS26 8EX"},{"postcode": "LS27 7AB"},{"postcode": "LS27 8PG"},{"postcode": "LS27 9NW"},{"postcode": "LS28 5BB"},{"postcode": "LS28 5NF"},{"postcode": "LS28 6NJ"},{"postcode": "LS28 7AQ"},{"postcode": "LS28 7BR"},{"postcode": "LS28 8JR"},{"postcode": "LS28 8LP"},{"postcode": "LS5 3PT"},{"postcode": "LS6 1LJ"},{"postcode": "LS6 1SN"},{"postcode": "LS6 3HZ"},{"postcode": "LS6 4LD"},{"postcode": "LS6 4LF"},{"postcode": "LS7 2PP"},{"postcode": "LS7 3QF"},{"postcode": "LS7 4DR"},{"postcode": "LS8 1DS"},{"postcode": "LS8 1HB"},{"postcode": "LS8 1HG"},{"postcode": "LS8 1JN"},{"postcode": "LS8 2QA"},{"postcode": "LS9 6SW"},{"postcode": "WF1 2DT"},{"postcode": "WF1 2NE"},{"postcode": "WF1 2QU"},{"postcode": "WF1 5NU"},{"postcode": "WF10 1EL"},{"postcode": "WF10 2BN"},{"postcode": "WF10 2QH"},{"postcode": "WF10 4TA"},{"postcode": "WF12 7JL"},{"postcode": "WF2 0BT"},{"postcode": "WF2 0JS"},{"postcode": "WF2 6QQ"},{"postcode": "WF2 8AA"},{"postcode": "WF2 8QR"},{"postcode": "WF2 9DJ"},{"postcode": "WF3 1JZ"},{"postcode": "WF3 2AU"},{"postcode": "WF3 3SQ"},{"postcode": "WF3 4JQ"},{"postcode": "WF4 1NN"},{"postcode": "WF4 3ED"},{"postcode": "WF4 5PP"},{"postcode": "WF5 0LQ"},{"postcode": "WF5 9DG"},{"postcode": "WF6 1AG"},{"postcode": "WF6 2NJ"},{"postcode": "WF7 5BH"},{"postcode": "WF7 7HQ"},{"postcode": "WF8 2LQ"}];

function geocodePostcodes() {
    postcodeArray.forEach( function (addressObject){
        $.get(location.protocol + '//nominatim.openstreetmap.org/search?countrycodes=gb&format=geojson&q='+addressObject.postcode, function(data){
            data.features[0].properties.postcode = addressObject.postcode;
            postcodeGeoJSON.push(data);
        });
        console.log(addressObject.postcode);
    });
    console.log(postcodeGeoJSON);
}
geocodePostcodes(); //call only once ever
